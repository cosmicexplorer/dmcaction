// Generated by CoffeeScript 2.6.1
var promisify;

({promisify} = require('util'));

import('../pkg').catch(console.error).then(async function({beep, unbeep, rebeep, examine_file}) {
  var buffer, file, handle, playButton, stopButton, uploadButton;
  handle = null;
  playButton = document.getElementById('play');
  stopButton = document.getElementById('stop');
  uploadButton = document.getElementById('upload');
  playButton.addEventListener('click', function() {
    if (handle != null) {
      return rebeep(handle);
    } else {
      return handle = beep();
    }
  });
  stopButton.addEventListener('click', function() {
    if (handle != null) {
      return unbeep(handle);
    }
  });
  // handle.free()
  // handle = null
  file = (await new Promise(function(resolve, reject) {
    var handleFile;
    handleFile = function() {
      return resolve(this.files[0]);
    };
    return uploadButton.addEventListener('change', handleFile, false);
  }));
  console.log(file);
  buffer = new Uint8Array((await file.arrayBuffer()));
  return examine_file(file.name, file.type, buffer);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsQ0FBQSxDQUFDLFNBQUQsQ0FBQSxHQUFjLE9BQUEsQ0FBUSxNQUFSLENBQWQ7O0FBRUEsTUFBQSxDQUFPLFFBQVAsQ0FDRSxDQUFDLEtBREgsQ0FDUyxPQUFPLENBQUMsS0FEakIsQ0FFRSxDQUFDLElBRkgsQ0FFUSxNQUFBLFFBQUEsQ0FBQyxDQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsTUFBZixFQUF1QixZQUF2QixDQUFELENBQUE7QUFDUixNQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUE7RUFBSSxNQUFBLEdBQVM7RUFDVCxVQUFBLEdBQWEsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBeEI7RUFDYixVQUFBLEdBQWEsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBeEI7RUFDYixZQUFBLEdBQWUsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsUUFBeEI7RUFFZixVQUFVLENBQUMsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsUUFBQSxDQUFBLENBQUE7SUFDbkMsSUFBRyxjQUFIO2FBQ0UsTUFBQSxDQUFPLE1BQVAsRUFERjtLQUFBLE1BQUE7YUFHRSxNQUFBLEdBQVMsSUFBQSxDQUFBLEVBSFg7O0VBRG1DLENBQXJDO0VBTUEsVUFBVSxDQUFDLGdCQUFYLENBQTRCLE9BQTVCLEVBQXFDLFFBQUEsQ0FBQSxDQUFBO0lBQ25DLElBQUcsY0FBSDthQUNFLE1BQUEsQ0FBTyxNQUFQLEVBREY7O0VBRG1DLENBQXJDLEVBWEo7OztFQWlCSSxJQUFBLEdBQU8sQ0FBQSxNQUFNLElBQUksT0FBSixDQUFZLFFBQUEsQ0FBQyxPQUFELEVBQVUsTUFBVixDQUFBO0FBQzdCLFFBQUE7SUFBTSxVQUFBLEdBQWEsUUFBQSxDQUFBLENBQUE7YUFBRyxPQUFBLENBQVEsSUFBQyxDQUFBLEtBQUssQ0FBQyxDQUFELENBQWQ7SUFBSDtXQUNiLFlBQVksQ0FBQyxnQkFBYixDQUE4QixRQUE5QixFQUF3QyxVQUF4QyxFQUFvRCxLQUFwRDtFQUZ1QixDQUFaLENBQU47RUFJUCxPQUFPLENBQUMsR0FBUixDQUFZLElBQVo7RUFDQSxNQUFBLEdBQVMsSUFBSSxVQUFKLENBQWdCLENBQUEsTUFBTSxJQUFJLENBQUMsV0FBTCxDQUFBLENBQU4sQ0FBaEI7U0FDVCxZQUFBLENBQWEsSUFBSSxDQUFDLElBQWxCLEVBQXdCLElBQUksQ0FBQyxJQUE3QixFQUFtQyxNQUFuQztBQXhCSSxDQUZSIiwic291cmNlc0NvbnRlbnQiOlsie3Byb21pc2lmeX0gPSByZXF1aXJlICd1dGlsJ1xuXG5pbXBvcnQoJy4uL3BrZycpXG4gIC5jYXRjaCBjb25zb2xlLmVycm9yXG4gIC50aGVuICh7YmVlcCwgdW5iZWVwLCByZWJlZXAsIGV4YW1pbmVfZmlsZX0pIC0+XG4gICAgaGFuZGxlID0gbnVsbFxuICAgIHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAncGxheSdcbiAgICBzdG9wQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3N0b3AnXG4gICAgdXBsb2FkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3VwbG9hZCdcblxuICAgIHBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAtPlxuICAgICAgaWYgaGFuZGxlP1xuICAgICAgICByZWJlZXAgaGFuZGxlXG4gICAgICBlbHNlXG4gICAgICAgIGhhbmRsZSA9IGJlZXAoKVxuXG4gICAgc3RvcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyICdjbGljaycsIC0+XG4gICAgICBpZiBoYW5kbGU/XG4gICAgICAgIHVuYmVlcCBoYW5kbGVcbiAgICAgICAgIyBoYW5kbGUuZnJlZSgpXG4gICAgICAgICMgaGFuZGxlID0gbnVsbFxuXG4gICAgZmlsZSA9IGF3YWl0IG5ldyBQcm9taXNlIChyZXNvbHZlLCByZWplY3QpIC0+XG4gICAgICBoYW5kbGVGaWxlID0gLT4gcmVzb2x2ZSBAZmlsZXNbMF1cbiAgICAgIHVwbG9hZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyICdjaGFuZ2UnLCBoYW5kbGVGaWxlLCBub1xuXG4gICAgY29uc29sZS5sb2cgZmlsZVxuICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5IChhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpXG4gICAgZXhhbWluZV9maWxlIGZpbGUubmFtZSwgZmlsZS50eXBlLCBidWZmZXJcbiJdfQ==
//# sourceURL=coffeescript