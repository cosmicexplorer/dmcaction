// Generated by CoffeeScript 2.6.1
var promisify;

({promisify} = require('util'));

import('../pkg').catch(console.error).then(async function({beep, unbeep, rebeep, examine_file, play_recorded}) {
  var buffer, file, handle, handleRec, playButton, playRecButton, stopButton, uploadButton;
  handle = null;
  handleRec = null;
  playButton = document.getElementById('play');
  stopButton = document.getElementById('stop');
  uploadButton = document.getElementById('upload');
  playRecButton = document.getElementById('play-recorded');
  playButton.addEventListener('click', function() {
    if (handle != null) {
      return rebeep(handle);
    } else {
      return handle = beep();
    }
  });
  stopButton.addEventListener('click', function() {
    if (handle != null) {
      return unbeep(handle);
    }
  });
  // handle.free()
  // handle = null
  file = (await new Promise(function(resolve, reject) {
    var handleFile;
    handleFile = function() {
      return resolve(this.files[0]);
    };
    return uploadButton.addEventListener('change', handleFile, false);
  }));
  playRecButton.addEventListener('click', function() {
    if (handleRec != null) {
      return play_recorded(handleRec);
    }
  });
  console.log(file);
  buffer = new Uint8Array((await file.arrayBuffer()));
  return handleRec = examine_file(file.name, file.type, buffer);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsQ0FBQSxDQUFDLFNBQUQsQ0FBQSxHQUFjLE9BQUEsQ0FBUSxNQUFSLENBQWQ7O0FBRUEsTUFBQSxDQUFPLFFBQVAsQ0FDRSxDQUFDLEtBREgsQ0FDUyxPQUFPLENBQUMsS0FEakIsQ0FFRSxDQUFDLElBRkgsQ0FFUSxNQUFBLFFBQUEsQ0FBQyxDQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsTUFBZixFQUF1QixZQUF2QixFQUFxQyxhQUFyQyxDQUFELENBQUE7QUFDUixNQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLEVBQUEsYUFBQSxFQUFBLFVBQUEsRUFBQTtFQUFJLE1BQUEsR0FBUztFQUNULFNBQUEsR0FBWTtFQUNaLFVBQUEsR0FBYSxRQUFRLENBQUMsY0FBVCxDQUF3QixNQUF4QjtFQUNiLFVBQUEsR0FBYSxRQUFRLENBQUMsY0FBVCxDQUF3QixNQUF4QjtFQUNiLFlBQUEsR0FBZSxRQUFRLENBQUMsY0FBVCxDQUF3QixRQUF4QjtFQUNmLGFBQUEsR0FBZ0IsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsZUFBeEI7RUFFaEIsVUFBVSxDQUFDLGdCQUFYLENBQTRCLE9BQTVCLEVBQXFDLFFBQUEsQ0FBQSxDQUFBO0lBQ25DLElBQUcsY0FBSDthQUNFLE1BQUEsQ0FBTyxNQUFQLEVBREY7S0FBQSxNQUFBO2FBR0UsTUFBQSxHQUFTLElBQUEsQ0FBQSxFQUhYOztFQURtQyxDQUFyQztFQU1BLFVBQVUsQ0FBQyxnQkFBWCxDQUE0QixPQUE1QixFQUFxQyxRQUFBLENBQUEsQ0FBQTtJQUNuQyxJQUFHLGNBQUg7YUFDRSxNQUFBLENBQU8sTUFBUCxFQURGOztFQURtQyxDQUFyQyxFQWJKOzs7RUFtQkksSUFBQSxHQUFPLENBQUEsTUFBTSxJQUFJLE9BQUosQ0FBWSxRQUFBLENBQUMsT0FBRCxFQUFVLE1BQVYsQ0FBQTtBQUM3QixRQUFBO0lBQU0sVUFBQSxHQUFhLFFBQUEsQ0FBQSxDQUFBO2FBQUcsT0FBQSxDQUFRLElBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBRCxDQUFkO0lBQUg7V0FDYixZQUFZLENBQUMsZ0JBQWIsQ0FBOEIsUUFBOUIsRUFBd0MsVUFBeEMsRUFBb0QsS0FBcEQ7RUFGdUIsQ0FBWixDQUFOO0VBSVAsYUFBYSxDQUFDLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDLFFBQUEsQ0FBQSxDQUFBO0lBQ3RDLElBQTJCLGlCQUEzQjthQUFBLGFBQUEsQ0FBYyxTQUFkLEVBQUE7O0VBRHNDLENBQXhDO0VBR0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxJQUFaO0VBQ0EsTUFBQSxHQUFTLElBQUksVUFBSixDQUFnQixDQUFBLE1BQU0sSUFBSSxDQUFDLFdBQUwsQ0FBQSxDQUFOLENBQWhCO1NBQ1QsU0FBQSxHQUFZLFlBQUEsQ0FBYSxJQUFJLENBQUMsSUFBbEIsRUFBd0IsSUFBSSxDQUFDLElBQTdCLEVBQW1DLE1BQW5DO0FBN0JSLENBRlIiLCJzb3VyY2VzQ29udGVudCI6WyJ7cHJvbWlzaWZ5fSA9IHJlcXVpcmUgJ3V0aWwnXG5cbmltcG9ydCgnLi4vcGtnJylcbiAgLmNhdGNoIGNvbnNvbGUuZXJyb3JcbiAgLnRoZW4gKHtiZWVwLCB1bmJlZXAsIHJlYmVlcCwgZXhhbWluZV9maWxlLCBwbGF5X3JlY29yZGVkfSkgLT5cbiAgICBoYW5kbGUgPSBudWxsXG4gICAgaGFuZGxlUmVjID0gbnVsbFxuICAgIHBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAncGxheSdcbiAgICBzdG9wQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3N0b3AnXG4gICAgdXBsb2FkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3VwbG9hZCdcbiAgICBwbGF5UmVjQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3BsYXktcmVjb3JkZWQnXG5cbiAgICBwbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgLT5cbiAgICAgIGlmIGhhbmRsZT9cbiAgICAgICAgcmViZWVwIGhhbmRsZVxuICAgICAgZWxzZVxuICAgICAgICBoYW5kbGUgPSBiZWVwKClcblxuICAgIHN0b3BCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAtPlxuICAgICAgaWYgaGFuZGxlP1xuICAgICAgICB1bmJlZXAgaGFuZGxlXG4gICAgICAgICMgaGFuZGxlLmZyZWUoKVxuICAgICAgICAjIGhhbmRsZSA9IG51bGxcblxuICAgIGZpbGUgPSBhd2FpdCBuZXcgUHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSAtPlxuICAgICAgaGFuZGxlRmlsZSA9IC0+IHJlc29sdmUgQGZpbGVzWzBdXG4gICAgICB1cGxvYWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciAnY2hhbmdlJywgaGFuZGxlRmlsZSwgbm9cblxuICAgIHBsYXlSZWNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAtPlxuICAgICAgcGxheV9yZWNvcmRlZCBoYW5kbGVSZWMgaWYgaGFuZGxlUmVjP1xuXG4gICAgY29uc29sZS5sb2cgZmlsZVxuICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5IChhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpXG4gICAgaGFuZGxlUmVjID0gZXhhbWluZV9maWxlIGZpbGUubmFtZSwgZmlsZS50eXBlLCBidWZmZXJcbiJdfQ==
//# sourceURL=coffeescript